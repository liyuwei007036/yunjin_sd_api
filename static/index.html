<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDÊ®°ÂûãÂõæÁâáÁîüÊàê - Ëá™ÁÑ∂ËØ≠Ë®ÄËæìÂÖ•</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Â§¥ÈÉ® -->
        <header class="header">
            <h1>üé® SDÊ®°ÂûãÂõæÁâáÁîüÊàê</h1>
            <div class="header-actions">
                <button id="savePresetBtn" class="btn btn-secondary">‰øùÂ≠òÈ¢ÑËÆæ</button>
                <select id="loadPresetSelect" class="preset-select">
                    <option value="">Âä†ËΩΩÈ¢ÑËÆæ...</option>
                </select>
            </div>
        </header>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <div class="main-content">
            <!-- Â∑¶‰æßÔºöËæìÂÖ•Âå∫Âüü -->
            <div class="input-panel">
                <!-- Ê®°ÂºèÂàáÊç¢Ê†áÁ≠æÈ°µ -->
                <div class="tabs">
                    <button class="tab-btn active" data-mode="text2img">ÊñáÁîüÂõæ</button>
                    <button class="tab-btn" data-mode="img2img">ÂõæÁîüÂõæ</button>
                </div>

                <!-- ÊñáÁîüÂõæË°®Âçï -->
                <form id="text2imgForm" class="form-panel active">
                    <!-- Ëá™ÁÑ∂ËØ≠Ë®ÄËæìÂÖ• -->
                    <div class="form-group">
                        <label for="text2imgNaturalLanguage" class="form-label">
                            Ëá™ÁÑ∂ËØ≠Ë®ÄÊèèËø∞ <span class="required">*</span>
                            <span class="tooltip" title="Áî®Ëá™ÁÑ∂ËØ≠Ë®ÄÊèèËø∞‰Ω†ÊÉ≥ÁîüÊàêÁöÑÂõæÁâáÔºå‰æãÂ¶ÇÔºö‰∏ÄÂè™ÂèØÁà±ÁöÑÂ∞èÁå´ÂùêÂú®Á™óÂè∞‰∏äÔºåÈò≥ÂÖâÈÄèËøáÁ™óÊà∑Ê¥íËøõÊù•">‚ÑπÔ∏è</span>
                        </label>
                        <textarea id="text2imgNaturalLanguage" class="textarea-large" rows="4" 
                            placeholder="‰æãÂ¶ÇÔºö‰∏ÄÂè™ÂèØÁà±ÁöÑÂ∞èÁå´ÂùêÂú®Á™óÂè∞‰∏äÔºåÈò≥ÂÖâÈÄèËøáÁ™óÊà∑Ê¥íËøõÊù•"></textarea>
                    </div>

                    <!-- È´òÁ∫ßÈÄâÈ°πÔºàÂèØÊäòÂè†Ôºâ -->
                    <div class="collapsible">
                        <button type="button" class="collapsible-btn" onclick="toggleCollapsible(this)">
                            <span>È´òÁ∫ßÈÄâÈ°π</span>
                            <span class="icon">‚ñº</span>
                        </button>
                        <div class="collapsible-content">
                            <!-- ÊâãÂä®ÊèêÁ§∫ËØç -->
                            <div class="form-group">
                                <label class="form-label">
                                    ÊâãÂä®ÊèêÁ§∫ËØçÔºàÂèØÈÄâÔºåË¶ÜÁõñAIÁîüÊàêÔºâ
                                    <span class="tooltip" title="Â¶ÇÊûúÂ°´ÂÜôÔºåÂ∞ÜË¶ÜÁõñËá™Âä®ÁîüÊàêÁöÑÊèêÁ§∫ËØç">‚ÑπÔ∏è</span>
                                </label>
                                <div class="form-row">
                                    <div class="form-col">
                                        <label for="text2imgPrompt" class="form-label-small">Prompt:</label>
                                        <textarea id="text2imgPrompt" class="textarea-medium" rows="3" 
                                            placeholder="Ê≠£ÂêëÊèêÁ§∫ËØç"></textarea>
                                    </div>
                                    <div class="form-col">
                                        <label for="text2imgNegativePrompt" class="form-label-small">Negative Prompt:</label>
                                        <textarea id="text2imgNegativePrompt" class="textarea-medium" rows="3" 
                                            placeholder="Ë¥üÈù¢ÊèêÁ§∫ËØç"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- ÂõæÁâáÂ∞∫ÂØ∏ -->
                            <div class="form-group">
                                <label class="form-label">
                                    ÂõæÁâáÂ∞∫ÂØ∏
                                    <span class="tooltip" title="ÁîüÊàêÂõæÁâáÁöÑÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶ÔºàÂÉèÁ¥†Ôºâ">‚ÑπÔ∏è</span>
                                </label>
                                <div class="form-row">
                                    <div class="form-col">
                                        <label for="text2imgWidth" class="form-label-small">ÂÆΩÂ∫¶:</label>
                                        <input type="number" id="text2imgWidth" class="input-number" value="512" min="128" max="2048" step="64">
                                    </div>
                                    <div class="form-col">
                                        <label for="text2imgHeight" class="form-label-small">È´òÂ∫¶:</label>
                                        <input type="number" id="text2imgHeight" class="input-number" value="512" min="128" max="2048" step="64">
                                    </div>
                                </div>
                                <div class="preset-buttons">
                                    <button type="button" class="preset-btn" onclick="setSize(512, 512)">512√ó512</button>
                                    <button type="button" class="preset-btn" onclick="setSize(768, 768)">768√ó768</button>
                                    <button type="button" class="preset-btn" onclick="setSize(1024, 1024)">1024√ó1024</button>
                                    <button type="button" class="preset-btn" onclick="setSize(1024, 768)">1024√ó768</button>
                                    <button type="button" class="preset-btn" onclick="setSize(768, 1024)">768√ó1024</button>
                                </div>
                            </div>

                            <!-- ÁîüÊàêÂèÇÊï∞ -->
                            <div class="form-group">
                                <label class="form-label">ÁîüÊàêÂèÇÊï∞</label>
                                <div class="slider-group">
                                    <label for="text2imgNumImages" class="form-label-small">
                                        ÁîüÊàêÊï∞Èáè: <span id="text2imgNumImagesValue">1</span>
                                        <span class="tooltip" title="‰∏ÄÊ¨°ÁîüÊàêÂ§öÂ∞ëÂº†ÂõæÁâáÔºà1-10Ôºâ">‚ÑπÔ∏è</span>
                                    </label>
                                    <input type="range" id="text2imgNumImages" class="slider" min="1" max="10" value="1" 
                                        oninput="document.getElementById('text2imgNumImagesValue').textContent = this.value">
                                </div>
                                <div class="slider-group">
                                    <label for="text2imgSteps" class="form-label-small">
                                        Êé®ÁêÜÊ≠•Êï∞: <span id="text2imgStepsValue">30</span>
                                        <span class="tooltip" title="ÁîüÊàêÊó∂ÁöÑËø≠‰ª£Ê≠•Êï∞ÔºåÊ≠•Êï∞Ë∂äÂ§öË¥®ÈáèË∂äÂ•Ω‰ΩÜÈÄüÂ∫¶Ë∂äÊÖ¢Ôºà20-50Ôºâ">‚ÑπÔ∏è</span>
                                    </label>
                                    <input type="range" id="text2imgSteps" class="slider" min="20" max="50" value="30" step="5"
                                        oninput="document.getElementById('text2imgStepsValue').textContent = this.value">
                                </div>
                                <div class="slider-group">
                                    <label for="text2imgGuidance" class="form-label-small">
                                        ÂºïÂØºÂº∫Â∫¶: <span id="text2imgGuidanceValue">7.5</span>
                                        <span class="tooltip" title="ÊéßÂà∂Ê®°ÂûãÂØπÊèêÁ§∫ËØçÁöÑÈÅµÂæ™Á®ãÂ∫¶Ôºà5.0-15.0Ôºâ">‚ÑπÔ∏è</span>
                                    </label>
                                    <input type="range" id="text2imgGuidance" class="slider" min="5" max="15" value="7.5" step="0.5"
                                        oninput="document.getElementById('text2imgGuidanceValue').textContent = this.value">
                                </div>
                            </div>

                            <!-- ÈááÊ†∑ËÆæÁΩÆ -->
                            <div class="form-group">
                                <label for="text2imgScheduler" class="form-label">
                                    ÈááÊ†∑ÊñπÊ≥ï
                                    <span class="tooltip" title="ÈÄâÊã©ÈááÊ†∑ÁÆóÊ≥ï">‚ÑπÔ∏è</span>
                                </label>
                                <select id="text2imgScheduler" class="select">
                                    <option value="">‰ΩøÁî®ÈªòËÆ§</option>
                                    <option value="DPMSolverMultistepScheduler">DPMSolverMultistepScheduler</option>
                                    <option value="DDIMScheduler">DDIMScheduler</option>
                                    <option value="EulerDiscreteScheduler">EulerDiscreteScheduler</option>
                                    <option value="EulerAncestralDiscreteScheduler">EulerAncestralDiscreteScheduler</option>
                                    <option value="PNDMScheduler">PNDMScheduler</option>
                                    <option value="LMSDiscreteScheduler">LMSDiscreteScheduler</option>
                                    <option value="HeunDiscreteScheduler">HeunDiscreteScheduler</option>
                                    <option value="KDPM2DiscreteScheduler">KDPM2DiscreteScheduler</option>
                                    <option value="KDPM2AncestralDiscreteScheduler">KDPM2AncestralDiscreteScheduler</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="text2imgSeed" class="form-label">
                                    ÈöèÊú∫ÁßçÂ≠ê
                                    <span class="tooltip" title="‰ΩøÁî®Áõ∏ÂêåseedÂèØÁîüÊàêÁõ∏ÂêåÂõæÁâáÔºåÁïôÁ©∫ÂàôÈöèÊú∫">‚ÑπÔ∏è</span>
                                </label>
                                    <div class="form-row">
                                        <input type="number" id="text2imgSeed" class="input-number" placeholder="ÁïôÁ©∫ÂàôÈöèÊú∫">
                                        <button type="button" class="btn btn-small" onclick="generateRandomSeed('text2imgSeed')">ÈöèÊú∫ÁîüÊàê</button>
                                    </div>
                            </div>

                            <!-- ËæìÂá∫ËÆæÁΩÆ -->
                            <div class="form-group">
                                <label class="form-label">ËæìÂá∫Ê†ºÂºè</label>
                                <div class="radio-group">
                                    <label><input type="radio" name="text2imgFormat" value="png" checked> PNG</label>
                                    <label><input type="radio" name="text2imgFormat" value="jpg"> JPG</label>
                                    <label><input type="radio" name="text2imgFormat" value="jpeg"> JPEG</label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="text2imgCallback" class="form-label">
                                    ÂõûË∞ÉURLÔºàÂèØÈÄâÔºâ
                                    <span class="tooltip" title="ÁîüÊàêÂÆåÊàêÂêéÂ∞ÜÁªìÊûúÊé®ÈÄÅÂà∞Ê≠§URL">‚ÑπÔ∏è</span>
                                </label>
                                <input type="url" id="text2imgCallback" class="input" placeholder="https://example.com/callback">
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-large">ÁîüÊàêÂõæÁâá</button>
                </form>

                <!-- ÂõæÁîüÂõæË°®Âçï -->
                <form id="img2imgForm" class="form-panel">
                    <!-- ÂõæÁâá‰∏ä‰º† -->
                    <div class="form-group">
                        <label class="form-label">
                            ‰∏ä‰º†ÂõæÁâá <span class="required">*</span>
                            <span class="tooltip" title="ÊãñÊãΩÂõæÁâáÂà∞ËøôÈáåÊàñÁÇπÂáª‰∏ä‰º†ÔºàPNG/JPEGÔºâ">‚ÑπÔ∏è</span>
                        </label>
                        <div id="img2imgUploadArea" class="upload-area">
                            <input type="file" id="img2imgFileInput" accept="image/png,image/jpeg,image/jpg" style="display: none">
                            <div class="upload-placeholder">
                                <span>üì∑ ÁÇπÂáªÊàñÊãñÊãΩÂõæÁâáÂà∞ËøôÈáå</span>
                            </div>
                            <img id="img2imgPreview" class="upload-preview" style="display: none;">
                        </div>
                    </div>

                    <!-- Ëá™ÁÑ∂ËØ≠Ë®ÄËæìÂÖ• -->
                    <div class="form-group">
                        <label for="img2imgNaturalLanguage" class="form-label">
                            Ëá™ÁÑ∂ËØ≠Ë®ÄÊèèËø∞ <span class="required">*</span>
                            <span class="tooltip" title="Áî®Ëá™ÁÑ∂ËØ≠Ë®ÄÊèèËø∞‰Ω†ÊÉ≥Â¶Ç‰Ωï‰øÆÊîπÂõæÁâá">‚ÑπÔ∏è</span>
                        </label>
                        <textarea id="img2imgNaturalLanguage" class="textarea-large" rows="4" 
                            placeholder="‰æãÂ¶ÇÔºöÂ∞ÜÂõæÁâáËΩ¨Êç¢‰∏∫Âä®Êº´È£éÊ†ºÔºåËâ≤ÂΩ©Êõ¥È≤úËâ≥"></textarea>
                    </div>

                    <!-- È´òÁ∫ßÈÄâÈ°πÔºàÂèØÊäòÂè†Ôºâ -->
                    <div class="collapsible">
                        <button type="button" class="collapsible-btn" onclick="toggleCollapsible(this)">
                            <span>È´òÁ∫ßÈÄâÈ°π</span>
                            <span class="icon">‚ñº</span>
                        </button>
                        <div class="collapsible-content">
                            <!-- ÊâãÂä®ÊèêÁ§∫ËØç -->
                            <div class="form-group">
                                <label class="form-label">
                                    ÊâãÂä®ÊèêÁ§∫ËØçÔºàÂèØÈÄâÔºåË¶ÜÁõñAIÁîüÊàêÔºâ
                                    <span class="tooltip" title="Â¶ÇÊûúÂ°´ÂÜôÔºåÂ∞ÜË¶ÜÁõñËá™Âä®ÁîüÊàêÁöÑÊèêÁ§∫ËØç">‚ÑπÔ∏è</span>
                                </label>
                                <div class="form-row">
                                    <div class="form-col">
                                        <label for="img2imgPrompt" class="form-label-small">Prompt:</label>
                                        <textarea id="img2imgPrompt" class="textarea-medium" rows="3" 
                                            placeholder="Ê≠£ÂêëÊèêÁ§∫ËØç"></textarea>
                                    </div>
                                    <div class="form-col">
                                        <label for="img2imgNegativePrompt" class="form-label-small">Negative Prompt:</label>
                                        <textarea id="img2imgNegativePrompt" class="textarea-medium" rows="3" 
                                            placeholder="Ë¥üÈù¢ÊèêÁ§∫ËØç"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- ÂõæÁîüÂõæÂº∫Â∫¶ -->
                            <div class="form-group">
                                <label class="form-label">ÂõæÁîüÂõæÂèÇÊï∞</label>
                                <div class="slider-group">
                                    <label for="img2imgStrength" class="form-label-small">
                                        ÂõæÁîüÂõæÂº∫Â∫¶: <span id="img2imgStrengthValue">0.75</span>
                                        <span class="tooltip" title="ÊéßÂà∂ÂØπÂéüÂõæÁöÑ‰øÆÊîπÁ®ãÂ∫¶Ôºà0.0-1.0Ôºâ">‚ÑπÔ∏è</span>
                                    </label>
                                    <input type="range" id="img2imgStrength" class="slider" min="0" max="1" value="0.75" step="0.1"
                                        oninput="document.getElementById('img2imgStrengthValue').textContent = this.value">
                                    <div class="slider-hint">
                                        <span>0.0=Âá†‰πé‰∏ç‰øÆÊîπ</span>
                                        <span>0.5=‰∏≠Á≠âÂèòÂåñ</span>
                                        <span>1.0=Êé•ËøëÈáçÊñ∞ÁîüÊàê</span>
                                    </div>
                                </div>
                            </div>

                            <!-- ÁîüÊàêÂèÇÊï∞ÔºàÂêåÊñáÁîüÂõæÔºâ -->
                            <div class="form-group">
                                <label class="form-label">ÁîüÊàêÂèÇÊï∞</label>
                                <div class="slider-group">
                                    <label for="img2imgNumImages" class="form-label-small">
                                        ÁîüÊàêÊï∞Èáè: <span id="img2imgNumImagesValue">1</span>
                                        <span class="tooltip" title="‰∏ÄÊ¨°ÁîüÊàêÂ§öÂ∞ëÂº†ÂõæÁâáÔºà1-10Ôºâ">‚ÑπÔ∏è</span>
                                    </label>
                                    <input type="range" id="img2imgNumImages" class="slider" min="1" max="10" value="1"
                                        oninput="document.getElementById('img2imgNumImagesValue').textContent = this.value">
                                </div>
                                <div class="slider-group">
                                    <label for="img2imgSteps" class="form-label-small">
                                        Êé®ÁêÜÊ≠•Êï∞: <span id="img2imgStepsValue">30</span>
                                        <span class="tooltip" title="ÁîüÊàêÊó∂ÁöÑËø≠‰ª£Ê≠•Êï∞Ôºà20-50Ôºâ">‚ÑπÔ∏è</span>
                                    </label>
                                    <input type="range" id="img2imgSteps" class="slider" min="20" max="50" value="30" step="5"
                                        oninput="document.getElementById('img2imgStepsValue').textContent = this.value">
                                </div>
                                <div class="slider-group">
                                    <label for="img2imgGuidance" class="form-label-small">
                                        ÂºïÂØºÂº∫Â∫¶: <span id="img2imgGuidanceValue">7.5</span>
                                        <span class="tooltip" title="ÊéßÂà∂Ê®°ÂûãÂØπÊèêÁ§∫ËØçÁöÑÈÅµÂæ™Á®ãÂ∫¶Ôºà5.0-15.0Ôºâ">‚ÑπÔ∏è</span>
                                    </label>
                                    <input type="range" id="img2imgGuidance" class="slider" min="5" max="15" value="7.5" step="0.5"
                                        oninput="document.getElementById('img2imgGuidanceValue').textContent = this.value">
                                </div>
                            </div>

                            <!-- ÈááÊ†∑ËÆæÁΩÆÔºàÂêåÊñáÁîüÂõæÔºâ -->
                            <div class="form-group">
                                <label for="img2imgScheduler" class="form-label">
                                    ÈááÊ†∑ÊñπÊ≥ï
                                    <span class="tooltip" title="ÈÄâÊã©ÈááÊ†∑ÁÆóÊ≥ï">‚ÑπÔ∏è</span>
                                </label>
                                <select id="img2imgScheduler" class="select">
                                    <option value="">‰ΩøÁî®ÈªòËÆ§</option>
                                    <option value="DPMSolverMultistepScheduler">DPMSolverMultistepScheduler</option>
                                    <option value="DDIMScheduler">DDIMScheduler</option>
                                    <option value="EulerDiscreteScheduler">EulerDiscreteScheduler</option>
                                    <option value="EulerAncestralDiscreteScheduler">EulerAncestralDiscreteScheduler</option>
                                    <option value="PNDMScheduler">PNDMScheduler</option>
                                    <option value="LMSDiscreteScheduler">LMSDiscreteScheduler</option>
                                    <option value="HeunDiscreteScheduler">HeunDiscreteScheduler</option>
                                    <option value="KDPM2DiscreteScheduler">KDPM2DiscreteScheduler</option>
                                    <option value="KDPM2AncestralDiscreteScheduler">KDPM2AncestralDiscreteScheduler</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="img2imgSeed" class="form-label">
                                    ÈöèÊú∫ÁßçÂ≠ê
                                    <span class="tooltip" title="‰ΩøÁî®Áõ∏ÂêåseedÂèØÁîüÊàêÁõ∏ÂêåÂõæÁâáÔºåÁïôÁ©∫ÂàôÈöèÊú∫">‚ÑπÔ∏è</span>
                                </label>
                                <div class="form-row">
                                    <input type="number" id="img2imgSeed" class="input-number" placeholder="ÁïôÁ©∫ÂàôÈöèÊú∫">
                                    <button type="button" class="btn btn-small" onclick="generateRandomSeed('img2imgSeed')">ÈöèÊú∫ÁîüÊàê</button>
                                </div>
                            </div>

                            <!-- ËæìÂá∫ËÆæÁΩÆÔºàÂêåÊñáÁîüÂõæÔºâ -->
                            <div class="form-group">
                                <label class="form-label">ËæìÂá∫Ê†ºÂºè</label>
                                <div class="radio-group">
                                    <label><input type="radio" name="img2imgFormat" value="png" checked> PNG</label>
                                    <label><input type="radio" name="img2imgFormat" value="jpg"> JPG</label>
                                    <label><input type="radio" name="img2imgFormat" value="jpeg"> JPEG</label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="img2imgCallback" class="form-label">
                                    ÂõûË∞ÉURLÔºàÂèØÈÄâÔºâ
                                    <span class="tooltip" title="ÁîüÊàêÂÆåÊàêÂêéÂ∞ÜÁªìÊûúÊé®ÈÄÅÂà∞Ê≠§URL">‚ÑπÔ∏è</span>
                                </label>
                                <input type="url" id="img2imgCallback" class="input" placeholder="https://example.com/callback">
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-large">ÁîüÊàêÂõæÁâá</button>
                </form>
            </div>

            <!-- Âè≥‰æßÔºöÁªìÊûúÂ±ïÁ§∫Âå∫Âüü -->
            <div class="result-panel">
                <h2>ÁîüÊàêÁªìÊûú</h2>
                <div id="taskStatus" class="task-status" style="display: none;">
                    <div class="status-info">
                        <span class="status-label">‰ªªÂä°Áä∂ÊÄÅ:</span>
                        <span id="statusText" class="status-text">pending</span>
                    </div>
                    <div id="taskProgress" class="task-progress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                </div>
                <div id="resultImages" class="result-images"></div>
                <div id="taskHistory" class="task-history">
                    <h3>‰ªªÂä°ÂéÜÂè≤</h3>
                    <div id="historyList" class="history-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
